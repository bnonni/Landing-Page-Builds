<style>
.content, .content>.aside, .content>aside, .content>section, .wrapper>section, footer>div, header{
	padding: 0;
}
section#main-content div.ppc-content{
	margin-bottom: 0;
}
section#main-content div.ppc-content h2{
	background-color: #363E7C;
    color: #ffff;
    text-align: center;
    padding: 5px 45px 5px 45px;
    font-size: 12px;
    margin-bottom: 0;
    width: 100%;
}
section#main-content div.ppc-content h3 {
    font-style: italic;
    text-align: center;
    color: #444C85;
    font-weight: 900;
    font-family: sucrose_slantbold;
    font-size: 17px;
    padding-top: 1%;
    padding-left: 8%;
    padding-right: 9%;
}
section#main-content div.ppc-content img{
    display: block;
    margin: auto;
}

section#main-content div.ppc-content img#noHassle{
    width: 53px;
    position: relative;
    left: 80px;
    padding-top: 2px;
    bottom: 98px;
}

section#main-content div.ppc-content img#twenty47{
	position: relative;
    padding-right: 18%;
}
section#main-content div.ppc-content div#twenty47Text{
    font-size: 10px;
    text-align: center;
    padding-top: 60px;
    padding-right: 31px;
    position: relative;
    left: 55%;
    line-height: 1.2em;
    width: 155px;
}

section#main-content div.ppc-content div#noHassleText{
    font-size: 10px;
    text-align: center;
    bottom: 37px;
    position: relative;
    right: 11px;
    width: 38%;
    line-height: 1.2em;
    float: left;
}
section#main-content div.ppc-content p{
    margin-top: 45px;
    background-color: #363E7C;
    color: #ffff;
    padding: 8px;
    font-weight: 600;
    width: 100%;
    position: relative;
    font-size: 11px;
}
section#reviews{
	padding-left: 16px;
}
section#reviews h2.tk-helvetica-neue{
	margin: auto;
    font-size: inherit;
	font-weight: 600;
}

section#reviews .rating#hideBar{
	border-top: 0;
}
section#reviews .review{
	border-left: 0 none;
	padding: 0.5rem 8px 0;
}
div.content div.outer-div div.coupon-div{
	background-color: #D4323B;
	margin: auto;
	display: inline-block;
	position: absolute;
	top: 17%;
	left: 9%;
	padding: 7px 16px 0 51px;
	font-family: sucrose_slantbold;
	width: 85%;
}	
div.outer-div div.coupon-div a.a-coupon{
	color: #fff;
	text-decoration: none;
}
</style>
<script>
var rrCity,rrState,mobileCarrier="${profile.geolocation.mobileCarrier}";
var params={};location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(s,k,v){params[k]=v});
try {
    function triggerEScheduleClicks() {
		try {
			adobe.target.trackEvent( {
				mbox: "ScheduleServiceModuleAppears"
			});
		} catch(e) {}
    }
    var pnccnt=0;
    function tallyPhnNumClicks() {
		try {
			pnccnt+=1,
			adobe.target.trackEvent( {
				mbox:"PhoneNumberClick", params: {
					PhoneNumberClick: pnccnt
				}
			});
		} catch(e) {}
    }
	function removeListeners() {
		try {
			$(document).find(".btn-group-schedule-service-online").click(function(c) {});
			var c=$(document).find(".btn-red");
			$.each(c, function(c, n) {
				"eschedule-embedded-form"==$(n).attr("data-gacategory")&&$(n).click(function(c) {});
			});
			$(document).find("body#ppc-page section#hero #mPanel.schedule-service-panel > .panel-body-wrap a.schedule-service").click(function(c) {});
			$(document).find("button.schedule-service").click(function(c) {});
			$(document).find(".phone-formatted").click(function(c) {});
			$(document).find(".market-phones").click(function(c) {});
			$(document).find(".desktop-header-phone").click(function(c) {});
			$(document).find(".call-phone-number").click(function(c) {});
			$(document).find("#nav-phone-number").click(function(c) {});
			$(document).find(".local-page-phone").click(function(c) {});
			$(document).find("#mob-call-now").click(function(c) {});
			$(document).find("#local-page-contactus-sticky").click(function(c) {});
		} catch(e) {}
	}
    function attachListeners() {
		try {
			$(document).find(".btn-group-schedule-service-online").click(function(c) {
				triggerEScheduleClicks()
			});
			var c=$(document).find(".btn-red");
			$.each(c, function(c, n) {
				"eschedule-embedded-form"==$(n).attr("data-gacategory")&&$(n).click(function(c) {
					triggerEScheduleClicks()
				});
			});
			$(document).find("body#ppc-page section#hero #mPanel.schedule-service-panel > .panel-body-wrap a.schedule-service").click(function(c) {
				triggerEScheduleClicks();
			});
			$(document).find("button.schedule-service").click(function(c) {
				triggerEScheduleClicks();
			});
			$(document).find(".phone-formatted").click(function(c) {
				tallyPhnNumClicks();
			});
			$(document).find(".market-phones").click(function(c) {
				tallyPhnNumClicks();
			});
			$(document).find(".desktop-header-phone").click(function(c) {
				tallyPhnNumClicks();
			});
			$(document).find(".call-phone-number").click(function(c) {
				tallyPhnNumClicks();
			});
			$(document).find("#nav-phone-number").click(function(c) {
				tallyPhnNumClicks();
			});
			$(document).find(".local-page-phone").click(function(c) {
				tallyPhnNumClicks();
			});
			$(document).find("#mob-call-now").click(function(c) {
				tallyPhnNumClicks();
			});
			$(document).find("#local-page-contactus-sticky").click(function(c) {
				tallyPhnNumClicks();
			});
		} catch(e) {}
    }
} catch(c) {}

(function() {
	'use strict';
	var rrTest = {
		connectionSpeed: '${profile.geolocation.connectionSpeed}', 
		cityStateVal:'', 
		cityVal:'',
        stateVal:'',
		locationNotFound:false,
		debug:true,
		account : 'Roto-Rooter',
		portfolio : 'rotorooter.com',
		test : 'Name of test',
		cookieName : 'RotoRooter',
		creative : "Experience B",
		widget: "div.ppc-content h2", 	
		phnNumber: rotoRooterApp.session.franchisePhoneNumber,
		
		init: function() {		
			rrTest.debug = Boolean(helpers.getQueryParam('debug'));

			rrTest.log("Test Running...");
			rrTest.log(rrTest.account + " - " + rrTest.portfolio);
			rrTest.log(rrTest.test + " - " + rrTest.creative);
			
			//Check to see if the element that we're modifying for the test is present on the page
			rrTest.elementLoaded(rrTest.widget, function() {	
				rrTest.log("Test 1 Ready!");
				rrTest.chall();
			});
		},
		chall : function() {
			removeListeners();
			rrTest.getGeo();
			rrTest.updateContent();
			attachListeners();
		},
		updateContent: function() {
			
$(document).find('div.content #main-content div.ppc-content h2').replaceWith('<h2>Our Full-Service Local Plumbers Provide Free Estimates on Any Job</h2>');
//Added New All Caps Text
$(document).find('div.content #main-content div.ppc-content h3').replaceWith('<h3>FIX IT RIGHT THE FIRST TIME WITH AN EXPERT ROTO-ROOTER PLUMBER</h3>');
//Added Img of No Hassle & 24-7
$(document).find('div.content #main-content div.ppc-content p:nth-child(4)').replaceWith('<img align="right" id="twenty47" src="https://s3.amazonaws.com/rr-placeholders/24-7.PNG"> <img align="left" id="noHassle" src="https://www.rotorooter.com/dotAsset/1bf4cb99-1015-49fc-8a9b-84cba1f71e7a.png">');
$(document).find('img#noHassle').after('<div id="noHassleText">Honest estimates and a no-hassle guarantee so you can get it fixed quickly</div>')
$(document).find('img#twenty47').after('<div id="twenty47Text">We\'re there for you 24/7, holidays and weekends, at no extra charge!</div>')
//Added ID to First Review to Elimiate Top Border
$(document).find('body#ppc-page .content>section#reviews .rating').attr("id", "hideBar");
//Schedule Service Button
$(document).find('body#ppc-page div.wrapper div.content section#reviews').after('<button class="scheduleServiceClass" id="scheduleServiceId" data-toggle="modal" data-target="#scheduleServiceModal" data-gacategory="eschedule-embedded-form" data-gaaction="click" data-galabel="eschedule-open-modal" style="background-color: #506bb7;border: 2px solid #fff;border-radius: .25rem;bottom: 1.25rem;color: #fff;display: block;font-size: 1.125rem;height: 3rem;line-height: 2rem;text-align: center;width: 16rem;margin: 0 auto"> <span class="tk-sans" style="font-family: &quot;acumin-pro&quot;,&quot;Helvetica Neue&quot;,&quot;Helvetica&quot;,&quot;Arial&quot;,sans-serif;visibility: visible"><i class="material-icons" style="bottom: auto;display: inline-block;font-size: 1.5rem;height: 1.5rem;line-height: 1.5rem;position: relative;top: .375rem;width: 1.75rem;"></i>Schedule Service Online</span></button>');

//GET $$ Off button -- dynamic serving of discount based on DMA
var dataAmt = $(document).find('aside#PPCcoupons').find('a.coupon').attr('data-amount');
var dataSrv = $(document).find('aside#PPCcoupons').find('a.coupon').attr('data-service');
var dataLabel = $(document).find('aside#PPCcoupons').find('a.coupon').attr('data-galabel');

var coupon = '<div class="outer-div" style="padding: 18px; position: relative;"><div class="coupon-div" style="background-color: #D4323B;margin: auto;display: inline-block;position: absolute;top: 17%;left: 9%;padding: 5px 16px 0 51px;font-family: sucrose_slantbold;width: 85%"> <a style="color: #fff; text-decoration: none;" class="a-coupon" href="#" data-toggle="modal" data-target="#couponModal" data-amount="'+dataAmt+'" data-service="'+dataSrv+'" data-gacategory="local-page" data-gaaction="click" data-galabel="'+dataLabel +'">GET '+dataAmt+' OFF YOUR NEXT SERVICE<i class="tk-material-icons"></i></a></div></div>';

$(document).find('button#scheduleServiceId.scheduleServiceClass').after(coupon);
		},
		getGeo: function() {
			var connectionSpeed = '${profile.geolocation.connectionSpeed}';
			rrTest.stateVal = rrTest.abbrState('${profile.geolocation.state}');
			rrTest.cityStateVal = '${profile.geolocation.city}, '+rrTest.stateVal;
			rrTest.cityVal = '${profile.geolocation.city}';
			
			//If on broadband (ie WiFi) then populate the city and state
			if(connectionSpeed === 'broadband') {
				adobe.target.trackEvent( {
					mbox:"LocationIdentified", params: {
						LocationIdentified: 'YES'
					}
				});
			} else {
				//If on mobile (ie 4G etc) then use RotoRooter's Session values; If not available then do not populate city/state
				if(rotoRooterApp) {
					if(rotoRooterApp.session) {
						rrTest.cityVal = rotoRooterApp.session.marketCity;
						rrTest.cityStateVal = rrTest.cityVal+", "+rotoRooterApp.session.marketState;
					}
				} else {
					rrTest.locationNotFound = true;
					rrTest.cityVal = '';
					rrTest.cityStateVal = '';
				}
				adobe.target.trackEvent( {
					mbox:"LocationIdentified", params: {
						LocationIdentified: 'NO'
					}
				});
			}
		},
		abbrState: function(state) {
			var st;
			switch(state.toLowerCase()) {
				case "alabama":
					st="AL";
					break;
				case "alaska":
					st="AK";
					break;
				case "arizona":
					st="AZ";
					break;
				case "arkansas":
					st="AR";
					break;
				case "california":
					st="CA";
					break;
				case "colorado":
					st="CO";
					break;
				case "connecticut":
					st="CT";
					break;
				case "delaware":
					st="DE";
					break;
				case "florida":
					st="FL";
					break;
				case "georgia":
					st="GA";
					break;
				case "hawaii":
					st="HI";
					break;
				case "idaho":
					st="ID";
					break;
				case "illinois":
					st="IL";
					break;
				case "indiana":
					st="IN";
					break;
				case "iowa":
					st="IA";
					break;
				case "kansas":
					st="KS";
					break;
				case "kentucky":
					st="KY";
					break;
				case "louisiana":
					st="LA";
					break;
				case "maine":
					st="ME";
					break;
				case "maryland":
					st="MD";
					break;
				case "massachusetts":
					st="MA";
					break;
				case "michigan":
					st="MI";
					break;
				case "minnesota":
					st="MN";
					break;
				case "mississippi":
					st="MS";
					break;
				case "missouri":
					st="MO";
					break;
				case "montana":
					st="MT";
					break;
				case "nebraska":
					st="NE";
					break;
				case "nevada":
					st="NV";
					break;
				case "new hampshire":
					st="NH";
					break;
				case "new jersey":
					st="NJ";
					break;
				case "new mexico":
					st="NM";
					break;
				case "new york":
					st="NY";
					break;
				case "north carolina":
					st="NC";
					break;
				case "north dakota":
					st="ND";
					break;
				case "ohio":
					st="OH";
					break;
				case "oklahoma":
					st="OK";
					break;
				case "oregon":
					st="OR";
					break;
				case "pennsylvania":
					st="PA";
					break;
				case "rhode island":
					st="RI";
					break;
				case "south carolina":
					st="SC";
					break;
				case "south dakota":
					st="SD";
					break;
				case "tennessee":
					st="TN";
					break;
				case "texas":
					st="TX";
					break;
				case "utah":
					st="UT";
					break;
				case "vermont":
					st="VT";
					break;
				case "virginia":
					st="VA";
					break;
				case "washington":
					st="WA";
					break;
				case "west virginia":
					st="WV";
					break;
				case "wisconsin":
					st="WI";
					break;
				case "wyoming":
					st="WY";
					break;
				case "district of columbia":
					st="DC";
					break;
				default:
					st=null;
					break;
			}
			return st;
		},
		elementLoaded : function (ele, callback) {
			rrTest.log('elementLoaded::  ' + ele + " - Checking...");
			window.clearTimeout(rrTest.eleTimer);
			if (document.querySelectorAll(ele).length > 0) {
				if (typeof callback === 'function') {
					rrTest.log('elementLoaded::  ' + ele + " - Found!");
					callback();
				}
			} else {
				rrTest.eleTimer = window.setTimeout(function(){rrTest.elementLoaded(ele, callback);}, 100);
			}
		},
		dependsLoaded : function (callback) { 
			rrTest.log(rrTest.test + " - " + rrTest.creative + " - dependsLoaded - Start...");
			
			window.clearTimeout(rrTest.timer);
			//Check for jQuery and _a object
			if ((window.$ && $.isReady) || (window.jQuery && jQuery.isReady)) {
				if (typeof callback === "function") {
					rrTest.log(rrTest.test + " - " + rrTest.creative + " - dependsLoaded - Ready!");
					callback();
				}
			} else {
				rrTest.timer = window.setTimeout(function() {
					rrTest.dependsLoaded(callback);
				}, 100);
			}
		},
		log : function(obj){
			if(rrTest.debug === true){
				console.log(obj);
			}
		}
	}	

	var helpers = {
		getQueryParam: function(variable) {
	      var query = window.location.search.substring(1);
	      var vars = query.split('&');
	      for (var i = 0; i < vars.length; i++) {
	        var pair = vars[i].split('=');
	        if (decodeURIComponent(pair[0]) == variable) {
	        	return decodeURIComponent(pair[1]);
	        }
	      }
	    }
	}

	rrTest.dependsLoaded(function(){ 
		rrTest.init();
	});
})();
</script>